# sudo su - centos

set -x

sudo yum update
sudo yum upgrade

mkdir -p /home/centos/.kube
#sudo mkdir /etc/kubernetes/pki/
cat <<EOF > /home/centos/.kube/config
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURuekNDQW9lZ0F3SUJBZ0lVQW8zZUhQbUJGa2pHRllIVnJXdFJRRXd5cVF3d0RRWUpLb1pJaHZjTkFRRUwKQlFBd1pqRUxNQWtHQTFVRUJoTUNWVk14RVRBUEJnTlZCQWdUQ0U1bGR5QlpiM0pyTVEwd0N3WURWUVFIRXdSVQpjbTk1TVJNd0VRWURWUVFLRXdwTGRXSmxjbTVsZEdWek1Rc3dDUVlEVlFRTEV3SkRRVEVUTUJFR0ExVUVBeE1LCmEzVmlaWEp1WlhSbGN6QWVGdzB4TnpBNU1qWXhOak15TURCYUZ3MHhPVEE1TWpZeE5qTXlNREJhTUdZeEN6QUoKQmdOVkJBWVRBbFZUTVJFd0R3WURWUVFJRXdoT1pYY2dXVzl5YXpFTk1Bc0dBMVVFQnhNRVZISnZlVEVUTUJFRwpBMVVFQ2hNS1MzVmlaWEp1WlhSbGN6RUxNQWtHQTFVRUN4TUNRMEV4RXpBUkJnTlZCQU1UQ210MVltVnlibVYwClpYTXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFERDdYRFNPcVdsSXR3cGhGVEoKUWdNZVRtUjBsRXRwSmd0OGhFUGc4T1JEVnNvY0RYZEQxd2VGTU1wQmFpTTlsWm91REVsWDgxZTExaHNkakYzZQo3bWZyZklIZlRoVk9Rb0xTUDdnN2ZPczY3K3p6U05FNERLTWNrYTJJelVpV09pTk05YVZNY3c0SzRQUG95T0FVCjE2Ris2TTB0eDd6ZWVHRkhvY2ZLUDVpV3hMc1BmbG9WSzI3dmZMRm1LUEM3L3dUS2hJQXcrdHhseWFVL0pRWVYKRkk1MENUbEJxUFUrUFl0eFNLMFdsbHJabmhLU2FjdER2Tlp0Mjl4OVEySHBXZFd4dVYwYjlLTTJQSzNmc3ZDOQpQQmIxMWJ1QTNxSEo4cHhKRUVJYzZnZHZxWGhWc2o1MzhVTkdhdUZpT0FuUDNsNURpQjJBZ3pqcldEQk40UEc0CkluQWJBZ01CQUFHalJUQkRNQTRHQTFVZER3RUIvd1FFQXdJQkJqQVNCZ05WSFJNQkFmOEVDREFHQVFIL0FnRUMKTUIwR0ExVWREZ1FXQkJSSFpGdk96bDhnZFM0NVFpQkQvVjZQdjBYU1JEQU5CZ2txaGtpRzl3MEJBUXNGQUFPQwpBUUVBVHNNN1Y5NjdoTWgvNHFZOWUrYXAyN0JtTTltNVJhWmd6Q3RLWEVlQXN2YnVRQll2ZnRZTkk4UlpoNXVYCkMzR0VPdi9QQ3FsSnR1ZEhjWmVRaUk2TTVyTkZkR0V2S1NIN3dYYXc5R1NYWis3VVUwemZwM3p6NDlDR05pa1YKZzdOOXBXRmR3dkNJUWNIWHQxeDd3dEM1RjlhTkg1MnJuZlZMSFFwMktaUDBkRFlIV1JVRklWNEFXMVh5NTVIVApRR1VpWG5wNUY0a21ETUlwRHNDWks3SzFoU1lCTlVRcEVTdXIyZ1RwSkpweVJZVG1XOXNKakJSOWhES0FyZmJCCjNEamxJUWlESHNGMVVWWnJZb29pd3ZEeHZyY0MvKzM3TkVCdkc5OFFXeW9vL20xRFYvcVA0QTRiakV0czFoc1cKYWlrY0NrUUIvTzM5ek1ySmk4Q3g5aW9XRkE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    server: https://10.236.107.6:6443
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    user: admin
  name: kubernetes-admin
current-context: kubernetes-admin
kind: Config
preferences: {}
users:
- name: admin
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURuRENDQW9TZ0F3SUJBZ0lVTzBQN1NDcWxvS1ZUWXMxcTdYcjlxdEFTRE1Vd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1pqRUxNQWtHQTFVRUJoTUNWVk14RVRBUEJnTlZCQWdUQ0U1bGR5QlpiM0pyTVEwd0N3WURWUVFIRXdSVQpjbTk1TVJNd0VRWURWUVFLRXdwTGRXSmxjbTVsZEdWek1Rc3dDUVlEVlFRTEV3SkRRVEVUTUJFR0ExVUVBeE1LCmEzVmlaWEp1WlhSbGN6QWVGdzB4TnpBNU1qWXhOak15TURCYUZ3MHhPVEE1TWpZeE5qTXlNREJhTUNreEZ6QVYKQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1RNHdEQVlEVlFRREV3VmhaRzFwYmpDQ0FTSXdEUVlKS29aSQpodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU1PaVh2cnk0UmN4SU5ZYmN5c0dxc3hQL2E3amEvMXFWQ0JpCjAydklsU3VQdGl4Y2FxU2lUWndLRGlobFdMR0drYTgrbS9oR1lRWkg2RXJrZjVucUZUNnhJelc2c2xHVmEyeW8KYW90elR3UXJtMTR6ek5ZL0tTaVd1bERwN1NjdFRYbStZcmVHdUtjc2ttVWlHcEtPV2MrQ1pBSm1HN3QvYmoxOQppcTFnKzRJbzhaTTdZdGhhVWlyTVUzK0VqWk13SmpWa1VqNjhYNjBRYnV1WEdYZllIS0RSNnJOWXZIODg1d2U4Cm1QVWJYVnZHTFB4ZkhwaXJ6c0o3Nnh1b2V4ZzZuT1lCSFhNUGpSSWg3em5mU3EwTEwvVjZEdFlaYzdpTEVZVisKRlBqSjhUeGpnd2FmK0doYWFFVGs5SWNaVytKbzVBZDV3eXVvRUI4VElaRSt6MzdhZnNNQ0F3RUFBYU4vTUgwdwpEZ1lEVlIwUEFRSC9CQVFEQWdXZ01CMEdBMVVkSlFRV01CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakFNCkJnTlZIUk1CQWY4RUFqQUFNQjBHQTFVZERnUVdCQlJqK09lR1NWaU1JaStDNDlVc09wa3ZReXNDaERBZkJnTlYKSFNNRUdEQVdnQlJIWkZ2T3psOGdkUzQ1UWlCRC9WNlB2MFhTUkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQQpFSXZWMXM2WDczdGFHc1BPbkhadnpvTVh0OGVtQ2JaTUNzUEJFR0pKYVV3eDYrT3dteFJ2VmxqZW1RS2hTamNQCkd5TFR1S2hnSE8rSnNKaHIyUVdHanZ3OXNteEpTUlEzMFVXakRGdHA0VlI5SzZJZHVEclQ2MkFydkhNR2JhMmkKTWlEV0ZPZ2RVQ3Z2RnNpbmRMSFBCUHgrbHVSTWtiaUJ6aVV6SkIwVjltMi9HUDRnWDZ6ajM4NEpHMkpDeExNQgpmTGFRa3dQU2NlM1grUnhwSGliMWZjUlo3Y01Qdk91QmIzRCtPUHFKWER3M04zSExYMnI5ekozb0NqZ1I3bytXCnNYbUl6MmR5WmNzVDBwaU5aMkZKaXNwWTJPSCtLSHFLbTRZdDlNWVg2ejJmVTlOUWQrUGdqN2dvejhaWXI5cm0KWGlnRTkwR01XRHU3Ujk5akNEQmlyZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBdzZKZSt2TGhGekVnMWh0ekt3YXF6RS85cnVOci9XcFVJR0xUYThpVks0KzJMRnhxCnBLSk5uQW9PS0dWWXNZYVJyejZiK0VaaEJrZm9TdVIvbWVvVlByRWpOYnF5VVpWcmJLaHFpM05QQkN1YlhqUE0KMWo4cEtKYTZVT250SnkxTmViNWl0NGE0cHl5U1pTSWFrbzVaejRKa0FtWWJ1Mzl1UFgyS3JXRDdnaWp4a3p0aQoyRnBTS3N4VGY0U05rekFtTldSU1ByeGZyUkJ1NjVjWmQ5Z2NvTkhxczFpOGZ6em5CN3lZOVJ0ZFc4WXMvRjhlCm1Ldk93bnZyRzZoN0dEcWM1Z0VkY3crTkVpSHZPZDlLclFzdjlYb08xaGx6dUlzUmhYNFUrTW54UEdPREJwLzQKYUZwb1JPVDBoeGxiNG1qa0IzbkRLNmdRSHhNaGtUN1BmdHArd3dJREFRQUJBb0lCQVFDYWNpYWY0WDFZak4ySwppck02WlpJVHFKYnpLZklJWjVndzFUUnFKRG0zNFVZRjhaUHprM3JIMUp4bXdkUHFtdjJLcDFnRkFyTDRmVzVqCktjK2ZHRkZiWkFjVEZPaFFSakUvNEJuMUs3eFc0NEpPTllEaUo0ejcwVHNZUkFXSTUxZ0I1QThWS3BPK3p3NW8KTHl0aFJtYWF6eXJiUmZkZzUvS0ZNd1ozYUZoRzRWOFFrSHJrejZkZFg1eFNjdUh4NDc3MlBoTTN5aTJqdWorVQpIV0FUUkw5aUdCb2sycFpIVkg0OHllQzY1R2Jrb2pDNXo3eEw0cllCcUtHQjJ4NUx2UUVvZGRDUDJ3dEorNFpHCmxScGtjQU5Kdkg4V053c3BudzlkSnZjWU5TRlBRU1MvNWphTUhNRld5M3l2NHNSMzRqSzFMYmZJSnRvZWcyb1UKSWFNeEdsUEJBb0dCQU10RFk5Q3M4UllqdTc4bitlMEk2SnBnYjlvb3M5bm91TFBJTDJIM1B0amozd1EyajBZRgpFWEtWN2dQeGVGRkE4d3VrQ2d4MjBpUkhqZ1pQMWlucFZ6R1ZocWY2eHFYU3UzVEFIS29tYWRiSlZ0RS9UYlNvCnpZSzdQanNISkRIYzd4NTZLaWRFeTFWSDZLV2xKaE1nbFUrTCs5Mm9ieHNtSkFBM2FkNUtzRldoQW9HQkFQWmsKUlBFNk42dWVJbkFmZWNoUUJqZzhxSFpCaWM4d2duSGZibE9HenlkdWpvR0xtak1mS0xOMXMwMDdKWmxYdmpWdAp1WXdyWFhRL3p2ZnRabUh6eklWUmU2QmY5VFZyYWJRRHJTMlFQZmRIZXh0QnhUUU5NM242WXRKc0dPWFNPV09QCkVxbmRuNlI2bFkvM01jVUdrY2ppUklmWUpUTFZscW5rQ2N5VW92SGpBb0dBRmhIL0tJMWVzQlM1TWd4WktzK28KMGZwZXFzVjRvZFNQR1paRzd0QTExcjhIWENIQWRNM2dFeDBNZHdrbEUwMkdGbUY5WmRVUkJEZHd5R2Fxem1vegp1WUtPMkhaMlUxTUtYNmJzZGQwdDZOQjd5TVNpMzFiazJha1RITDJ0eEd4RTJuNVJUV28rMmNleER5dGJjd0E2CnRpUncrS1J0Uy9sY04xbk0rUUlMRzRFQ2dZRUFtQUxhcWYwaDlZYVZkcGxrdUJudkRHa1lBZ1dETVVtYllRZlkKK0QxV3R0dzFuV1QwbUkranU3eGxCOFB5K1gweHc2TFRjOUFaVXl3KzA2VXFva29ZcHpQVFV1bUF6aGxiMkl6ZwpIaGs4c2IvdkNxejBMcDNxWVZvQitCSnE5ZmRTSXNOVlgybDFJYlBqYkRPMUIvcDZuUFpFRTQ5ZHU5UWNwT29rCnhZdjZUOE1DZ1lCc1FIcVpaaGRQbkFWM3BseUVOZGRxUm1OY2VRa0V6cUNjNmxxSVM0OW5BM1QxUk83c2pQb3gKZWJhak1FbHFoYlcxMjI5SnFkZTd2TU4zb2RNTFR6TlBGK0l2QWpuNGxYTjlhVnNkQk8rN2wxdDI0UDMyQzFsOQpVS0xrVnhpWE1jM2pkS3VsM1VlY0VkdWpOcCtYc1BhOGNMV1pLRVM2Mk9TemxjWUNSajNuMGc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
EOF

#sudo cp kube-proxy.pem /etc/kubernetes/pki/
#sudo cp kube-proxy-key.pem /etc/kubernetes/pki/
#sudo cp ca.pem /etc/kubernetes/pki/
